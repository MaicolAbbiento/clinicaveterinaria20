
@{
    ViewBag.Title = "SearchByMNumber";
}

<h2 class="p-5 fw-semibold display-4">Ricerca per microchip</h2>

<div class="d-flex flex-column align-items-center flex-grow-1 w-50 mx-auto py-5 my-5">
    <label for="nmicrochipInput" class="control-label fw-semibold pb-5">Inserire numero di microchip</label>
    <input id="nmicrochipInput" class="form-control w-100 rounded-pill p-2 mb-5" type="text" />
    <button id="bottone" class="btn btn-light rounded-pill border-0 w-25 fw-semibold px-5 py-2 fs-5 mb-5">Cerca</button>
    <div id="risultati" style="display:none;">
        <div class="card" style="width: 18rem;">
            <img class="card-img-top" src="" alt="Immagine">
            <div class="card-body">
                <h5 class="card-title"></h5>
                <p class="card-text"></p>
            </div>
        </div>
    </div>

    <div id="errore" style="display:none;">Nessun animale trovato con il numero di microchip inserito.</div>
</div>





@section scripts{
    <script>
        $(document).ready(function() {
            $("#bottone").click(function () {
                let numero = $("#nmicrochipInput").val()
                $("#errore").hide()
                $("#risultati").hide()
                $.ajax({
                    type: "POST",
                    url: "SearchByMNumber",
                    data: { nmicrochip: numero },
                    success: function (data) {

                        $("#risultati").show()
                        $(".card-img-top").attr("src", `/Content/img/uploads/${data.foto}`)
                        $(".card-title").html(data.nome)
                        $(".card-text").html(`${data.tipo} di colore ${data.coloreMantello}`)
                    },
                    error: function(){
                        $("#errore").show()
                    }
                    
                })
            })
        })
    </script>
    }